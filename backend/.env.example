# OmniAI Backend Configuration (example)

# =============================================================================
# SERVER
# =============================================================================
ENVIRONMENT=development
HOST=0.0.0.0
PORT=8000
DEBUG=false
LOG_LEVEL=INFO

# =============================================================================
# SECURITY
# =============================================================================
# Set a stable, high-entropy key in production.
SECRET_KEY=change-me

# CORS allowed origins (comma-separated). In production, this should be only your
# GitHub Pages origin(s), e.g. https://omniplexity.github.io
CORS_ORIGINS=https://omniplexity.github.io

# Rate limiting (requests per minute per IP)
RATE_LIMIT_RPM=200

# Max request body size in bytes
MAX_REQUEST_BYTES=10485760
VOICE_MAX_REQUEST_BYTES=26214400

# =============================================================================
# AUTHENTICATION
# =============================================================================
SESSION_COOKIE_NAME=omni_session
SESSION_TTL_SECONDS=604800
COOKIE_SECURE=true
# For cross-site cookies (GitHub Pages -> tunneled backend), you typically need:
#   SameSite=None AND Secure=true
COOKIE_SAMESITE=none
COOKIE_DOMAIN=

CSRF_HEADER_NAME=X-CSRF-Token
CSRF_COOKIE_NAME=omni_csrf
INVITE_REQUIRED=true

# Bootstrap admin (runs only if no admin exists). Recommended: keep disabled
# by default and enable only for first-time setup.
BOOTSTRAP_ADMIN_ENABLED=false
BOOTSTRAP_ADMIN_USERNAME=
BOOTSTRAP_ADMIN_EMAIL=
BOOTSTRAP_ADMIN_PASSWORD=

# =============================================================================
# DATABASE
# =============================================================================
# SQLite fallback
DATABASE_URL=sqlite:///./data/omniai.db
# Postgres primary (docker-compose uses `postgres` hostname)
DATABASE_URL_POSTGRES=postgresql://omniai:${POSTGRES_PASSWORD}@postgres:5432/omniai

# =============================================================================
# MEDIA
# =============================================================================
MEDIA_STORAGE_PATH=./data/uploads

# =============================================================================
# PROVIDERS
# =============================================================================
PROVIDER_DEFAULT=lmstudio
PROVIDERS_ENABLED=lmstudio
PROVIDER_TIMEOUT_SECONDS=60
PROVIDER_MAX_RETRIES=3
SSE_PING_INTERVAL_SECONDS=30
READINESS_CHECK_PROVIDERS=false

LMSTUDIO_BASE_URL=http://host.docker.internal:1234
OLLAMA_BASE_URL=http://127.0.0.1:11434

# OpenAI-compatible (optional)
OPENAI_COMPAT_BASE_URL=
OPENAI_COMPAT_API_KEY=

# =============================================================================
# EMBEDDINGS (semantic search / RAG)
# =============================================================================
# To enable semantic search, set EMBEDDINGS_ENABLED=true and ensure you have at
# least one enabled provider that supports embeddings (e.g. openai_compat or ollama).
EMBEDDINGS_ENABLED=false
EMBEDDINGS_MODEL=
EMBEDDINGS_PROVIDER_PREFERENCE=openai_compat,ollama,lmstudio

# =============================================================================
# VOICE
# =============================================================================
VOICE_PROVIDER_PREFERENCE=whisper,openai_compat
VOICE_WHISPER_MODEL=base
VOICE_WHISPER_DEVICE=cpu
VOICE_OPENAI_AUDIO_MODEL=whisper-1

# =============================================================================
# REDIS
# =============================================================================
REDIS_URL=redis://redis:6379/0
